import{d}from"./tanstack-C82ICjHp.js";import{s as f}from"./client-BQnz2r4z.js";const p=["الكل","نصوص","صور","فيديو","برمجة","إنتاجية","دراسة وطلاب","صوت"],i=12,P=(r,a)=>d({queryKey:["tools",r,a],queryFn:async({pageParam:s=0})=>{let e=f.from("tools").select("*");if(a!=="الكل"&&(e=e.eq("category",a)),r.trim()){const t=r.trim().slice(0,100).replace(/\\/g,"\\\\").replace(/%/g,"\\%").replace(/_/g,"\\_");e=e.or(`title.ilike.%${t}%,description.ilike.%${t}%`)}const o=s,c=o+i-1,{data:l,error:n}=await e.order("is_featured",{ascending:!1}).order("created_at",{ascending:!1}).range(o,c);if(n)throw n;return(l??[]).map(t=>({...t,id:String(t.id)}))},initialPageParam:0,getNextPageParam:(s,e)=>{if(!(s.length<i))return e.length*i},staleTime:1e3*60*5,gcTime:1e3*60*10});export{p as c,P as u};
