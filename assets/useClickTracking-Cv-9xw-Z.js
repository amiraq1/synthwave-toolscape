import{z as r,G as e,r as t}from"./react-vendor-DJsICmPt.js";import{s as o}from"./client-Dp-bvcZ2.js";const a=async r=>{const{data:e,error:t}=await o.from("tools").select("*").eq("id",parseInt(r)).maybeSingle();if(t)throw t;if(!e)throw new Error("Tool not found");return e},n=e=>r({queryKey:["tool",e],queryFn:()=>a(e),enabled:!!e,staleTime:3e5}),s=()=>{const r=e();return e=>{const t=String(e);r.getQueryData(["tool",t])||r.prefetchQuery({queryKey:["tool",t],queryFn:()=>a(t),staleTime:3e5})}},c=()=>({recordClick:t.useCallback(async r=>{const e=Number(r);if(!isNaN(e))try{const{error:r}=await o.rpc("record_tool_click",{p_tool_id:e,p_referrer:document.referrer||null,p_user_agent:navigator.userAgent||null})}catch(t){}},[])});export{c as a,s as b,n as u};
