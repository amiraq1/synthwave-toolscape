import{r as m,j as e}from"./react-core-DF6eTxSH.js";import{s as o}from"./client-BQnz2r4z.js";import{b as d}from"./router-6Sp3h7Hu.js";import{m as x,L as f}from"./icons-D1KRm4qg.js";import"./supabase-BI1TbgRl.js";const n="nabd_return_to",N=()=>{const r=d();return m.useEffect(()=>{const i=async()=>{try{const{data:{session:s},error:a}=await o.auth.getSession();if(a){console.error("Auth callback error:",a),r("/auth?error=callback_failed");return}if(s){const t=sessionStorage.getItem(n);if(sessionStorage.removeItem(n),t)try{if(new URL(t).origin===window.location.origin){window.location.href=t;return}}catch{}r("/")}else r("/auth")}catch(s){console.error("Unexpected error in auth callback:",s),r("/auth?error=unexpected")}},{data:{subscription:c}}=o.auth.onAuthStateChange((s,a)=>{if(s==="SIGNED_IN"&&a){const t=sessionStorage.getItem(n);if(sessionStorage.removeItem(n),t)try{if(new URL(t).origin===window.location.origin){window.location.href=t;return}}catch{}r("/")}}),l=setTimeout(i,500);return()=>{clearTimeout(l),c.unsubscribe()}},[r]),e.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center",dir:"rtl",children:[e.jsx("div",{className:"fixed top-0 left-1/4 w-96 h-96 bg-neon-purple/20 rounded-full blur-[120px] -z-10"}),e.jsx("div",{className:"fixed bottom-0 right-1/4 w-96 h-96 bg-neon-blue/20 rounded-full blur-[120px] -z-10"}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(x,{className:"h-10 w-10 text-neon-purple animate-pulse"}),e.jsxs("h1",{className:"text-3xl",children:[e.jsx("span",{className:"font-extrabold gradient-text",children:"نبض"}),e.jsx("span",{className:"font-medium text-foreground/80 mr-1",children:"AI"})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(f,{className:"h-8 w-8 text-neon-purple animate-spin"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"جاري إتمام تسجيل الدخول..."})]})]})]})};export{N as default};
