import{am as e}from"./react-core-Ds-4081u.js";import{s as r}from"./client-CroYBHHp.js";const a=["الكل","نصوص","صور","فيديو","برمجة","إنتاجية","دراسة وطلاب","صوت"],t=(a,t)=>e({queryKey:["tools",a,t],queryFn:async({pageParam:e=0})=>{let i=r.from("tools").select("*");if("الكل"!==t&&(i=i.eq("category",t)),a.trim()){const e=a.trim().slice(0,100).replace(/\\/g,"\\\\").replace(/%/g,"\\%").replace(/_/g,"\\_");i=i.or(`title.ilike.%${e}%,description.ilike.%${e}%`)}const o=e,s=o+12-1,{data:c,error:n}=await i.order("is_featured",{ascending:!1}).order("created_at",{ascending:!1}).range(o,s);if(n)throw n;return(c??[]).map(e=>({...e,id:String(e.id)}))},initialPageParam:0,getNextPageParam:(e,r)=>{if(!(e.length<12))return 12*r.length},staleTime:3e5,gcTime:6e5});export{a as c,t as u};
