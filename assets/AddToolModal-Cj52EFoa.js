import{v as e,r as s,at as a,bb as r,w as t,j as l,b6 as i,bc as n,au as c,L as o,S as d,av as m,X as x}from"./react-core-Ds-4081u.js";import{W as h,T as p,Z as u,U as j,Y as g}from"./vendor-BS0l4q4C.js";import{s as b}from"./client-CroYBHHp.js";import{u as f}from"./index-BjbHwrV-.js";import{D as N,a as v,c as y,e as w,b as k,d as C}from"./dialog-DtD38qR9.js";import{F as _,a as V,b as S,c as z,d as D,e as B}from"./form-D3PPS6_A.js";import{B as F}from"./button-z3iXzSpy.js";import{I as O}from"./input-DRGlYIJe.js";import{T as P}from"./textarea-3BFPk-UV.js";import{S as T,a as q,b as E,c as I,d as K}from"./select-eClYMsyj.js";import{b as L}from"./react-router-BmNS8iat.js";import"./react-dom-CJlssZTM.js";import"./radix-ui-ByoYm48K.js";import"./tanstack-DamGjQ03.js";import"./markdown-01_NS6zS.js";import"./supabase-CqVAhX3r.js";import"./utils-Bmne0XXo.js";import"./label-DYWcA19O.js";const $=["ŸÜÿµŸàÿµ","ÿµŸàÿ±","ŸÅŸäÿØŸäŸà","ÿ®ÿ±ŸÖÿ¨ÿ©","ÿ•ŸÜÿ™ÿßÿ¨Ÿäÿ©","ÿØÿ±ÿßÿ≥ÿ© Ÿàÿ∑ŸÑÿßÿ®","ÿµŸàÿ™"],A=["ŸÖÿ¨ÿßŸÜŸä","ŸÖÿØŸÅŸàÿπ"],G=p({title:j().min(2,"ÿßŸÑÿßÿ≥ŸÖ ŸÇÿµŸäÿ± ÿ¨ÿØÿßŸã"),description:j().min(10,"ÿßŸÑŸàÿµŸÅ ŸÇÿµŸäÿ± ÿ¨ÿØÿßŸã").max(500),url:j().url("ÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"),image_url:j().url("ÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠").optional().or(g("")),category:j().min(1,"ŸÖÿ∑ŸÑŸàÿ®"),pricing_type:j(),features:u(p({value:j().min(1,"ŸÖÿ∑ŸÑŸàÿ®")})).optional(),screenshots:u(p({value:j().url("ÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠")})).optional()}),H=({open:p,onOpenChange:u})=>{const{toast:j}=f(),g=e(),H=L(),[J,Q]=s.useState(!1),[U,W]=s.useState(null),Y=a({resolver:h(G),defaultValues:{title:"",description:"",url:"",image_url:"",category:"",pricing_type:"ŸÖÿ¨ÿßŸÜŸä",features:[{value:""}],screenshots:[]}}),{fields:Z,append:M,remove:R}=r({control:Y.control,name:"features"});s.useEffect(()=>{if(p){(async()=>{const{data:{session:e}}=await b.auth.getSession();W(!!e)})(),Y.reset()}},[p,Y]);const X=async()=>{const e=Y.getValues("title"),s=Y.getValues("description");if(e.trim()&&s.trim()){Q(!0);try{const{data:a,error:r}=await b.functions.invoke("enhance-description",{body:{toolName:e,description:s}});if(r)throw r;a?.enhancedDescription&&(Y.setValue("description",a.enhancedDescription,{shouldValidate:!0}),j({title:"‚ú® ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿ≥ŸäŸÜ"}))}catch(a){j({title:"ÿÆÿ∑ÿ£",description:"ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿ≥ŸäŸÜ",variant:"destructive"})}finally{Q(!1)}}else j({title:"ÿ™ŸÜÿ®ŸäŸá",description:"ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑŸàÿµŸÅ ÿ£ŸàŸÑÿßŸã",variant:"destructive"})},ee=t({mutationFn:async e=>{const s=e.features?.map(e=>e.value).filter(Boolean)||[],a=e.screenshots?.map(e=>e.value).filter(Boolean)||[],{error:r}=await b.from("tools").insert([{title:e.title,description:e.description,url:e.url,image_url:e.image_url||null,category:e.category,pricing_type:e.pricing_type,features:s.length>0?s:null,screenshots:a.length>0?a:[]}]);if(r)throw r},onSuccess:()=>{j({title:"üéâ ÿ™ŸÖ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÜÿ¨ÿßÿ≠",className:"bg-emerald-500/10 text-emerald-500"}),g.invalidateQueries({queryKey:["tools"]}),u(!1)},onError:()=>j({title:"ÿÆÿ∑ÿ£",description:"ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ŸÅÿ∏",variant:"destructive"})});return!1===U?l.jsx(N,{open:p,onOpenChange:u,children:l.jsxs(v,{className:"sm:max-w-xs p-6 text-center",dir:"rtl",children:[l.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:l.jsx(i,{className:"w-6 h-6 text-primary"})}),l.jsx(y,{className:"text-xl font-bold mb-2",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"}),l.jsx(w,{className:"mb-6",children:"Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿØŸàÿßÿ™."}),l.jsx(F,{onClick:()=>{u(!1),H("/auth")},className:"w-full",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"})]})}):l.jsx(N,{open:p,onOpenChange:u,children:l.jsxs(v,{className:"sm:max-w-lg w-[95vw] max-h-[90vh] flex flex-col p-0 gap-0 overflow-hidden border-white/10 bg-background/95 backdrop-blur-xl",dir:"rtl",children:[l.jsxs(k,{className:"p-4 pb-2 border-b border-white/5 bg-muted/20 shrink-0",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx(y,{className:"text-lg font-bold",children:"ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿØÿßÿ© ÿ¨ÿØŸäÿØÿ©"})}),l.jsx(w,{className:"text-xs",children:"ÿ¥ÿßÿ±ŸÉŸÜÿß ÿ£ÿØŸàÿßÿ™ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä ŸÖŸÅŸäÿØÿ©."})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsx(_,{...Y,children:l.jsxs("form",{id:"add-tool-form",onSubmit:Y.handleSubmit(e=>ee.mutate(e)),className:"space-y-4 pb-4",children:[l.jsxs("div",{className:"space-y-3 bg-muted/10 p-3 rounded-lg border border-white/5",children:[l.jsx(V,{control:Y.control,name:"title",render:({field:e})=>l.jsxs(S,{children:[l.jsx(z,{className:"text-xs",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ£ÿØÿßÿ©"}),l.jsx(D,{children:l.jsx(O,{placeholder:"ŸÖÿ´ÿßŸÑ: ChatGPT",...e,className:"h-8 bg-background/50"})}),l.jsx(B,{className:"text-[10px]"})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(V,{control:Y.control,name:"category",render:({field:e})=>l.jsxs(S,{children:[l.jsx(z,{className:"text-xs",children:"ÿßŸÑÿ™ÿµŸÜŸäŸÅ"}),l.jsxs(T,{onValueChange:e.onChange,defaultValue:e.value,children:[l.jsx(D,{children:l.jsx(q,{className:"h-8 bg-background/50",children:l.jsx(E,{placeholder:"ÿßÿÆÿ™ÿ±"})})}),l.jsx(I,{children:$.map(e=>l.jsx(K,{value:e,children:e},e))})]}),l.jsx(B,{className:"text-[10px]"})]})}),l.jsx(V,{control:Y.control,name:"pricing_type",render:({field:e})=>l.jsxs(S,{children:[l.jsx(z,{className:"text-xs",children:"ÿßŸÑÿ≥ÿπÿ±"}),l.jsxs(T,{onValueChange:e.onChange,defaultValue:e.value,children:[l.jsx(D,{children:l.jsx(q,{className:"h-8 bg-background/50",children:l.jsx(E,{})})}),l.jsx(I,{children:A.map(e=>l.jsx(K,{value:e,children:e},e))})]})]})})]})]}),l.jsxs("div",{className:"space-y-3 bg-muted/10 p-3 rounded-lg border border-white/5",children:[l.jsx(V,{control:Y.control,name:"url",render:({field:e})=>l.jsxs(S,{children:[l.jsxs(z,{className:"text-xs flex items-center gap-1",children:[l.jsx(n,{className:"w-3 h-3"})," ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ"]}),l.jsx(D,{children:l.jsx(O,{placeholder:"https://...",dir:"ltr",...e,className:"h-8 bg-background/50"})}),l.jsx(B,{className:"text-[10px]"})]})}),l.jsx(V,{control:Y.control,name:"image_url",render:({field:e})=>l.jsxs(S,{children:[l.jsxs(z,{className:"text-xs flex items-center gap-1",children:[l.jsx(c,{className:"w-3 h-3"})," ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ¥ÿπÿßÿ± (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"]}),l.jsx(D,{children:l.jsx(O,{placeholder:"https://...",dir:"ltr",...e,className:"h-8 bg-background/50"})})]})})]}),l.jsx(V,{control:Y.control,name:"description",render:({field:e})=>l.jsxs(S,{children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(z,{className:"text-xs",children:"ÿßŸÑŸàÿµŸÅ"}),l.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:X,disabled:J,className:"h-6 px-2 text-[10px] text-neon-purple hover:bg-neon-purple/10",children:J?l.jsx(o,{className:"w-3 h-3 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(d,{className:"w-3 h-3 mr-1"})," ÿ™ÿ≠ÿ≥ŸäŸÜ AI"]})})]}),l.jsx(D,{children:l.jsx(P,{placeholder:"ŸàÿµŸÅ ŸÖÿÆÿ™ÿµÿ±...",...e,className:"min-h-[80px] bg-background/50 resize-none text-sm"})}),l.jsx(B,{className:"text-[10px]"})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(z,{className:"text-xs text-muted-foreground",children:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),l.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>M({value:""}),className:"h-6 w-6 p-0",children:l.jsx(m,{className:"w-4 h-4"})})]}),Z.map((e,s)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(V,{control:Y.control,name:`features.${s}.value`,render:({field:e})=>l.jsx(O,{placeholder:`ŸÖŸäÿ≤ÿ© ${s+1}`,...e,className:"h-8 bg-background/50 text-xs"})}),l.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:()=>R(s),className:"h-8 w-8 text-destructive",children:l.jsx(x,{className:"w-4 h-4"})})]},e.id))]})]})})}),l.jsxs(C,{className:"p-4 border-t border-white/5 bg-background shrink-0 flex-row gap-2",children:[l.jsx(F,{type:"button",variant:"outline",onClick:()=>u(!1),className:"flex-1 h-9",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),l.jsx(F,{type:"submit",form:"add-tool-form",disabled:ee.isPending,className:"flex-1 h-9 bg-primary hover:bg-primary/90",children:ee.isPending?l.jsx(o,{className:"w-4 h-4 animate-spin"}):"ÿ≠ŸÅÿ∏"})]})]})})};export{H as default};
